# ASCII Diagrams in Karl

> "A picture is worth a thousand tokens" - Karl, probably

Karl can generate beautiful ASCII diagrams to explain code, architecture, and flows. Because sometimes you need to *see* the ace before you serve it.

## When Diagrams Help

### Perfect Use Cases
- **Architecture Overview**: System components and their relationships
- **Data Flow**: How information moves through your system
- **Dependencies**: Package/module relationships and dependency graphs
- **State Machines**: State transitions and business logic
- **API Flows**: Request/response patterns and authentication flows
- **Database Schemas**: Table relationships and ER diagrams
- **Network Topology**: Service communication patterns
- **Call Hierarchies**: Function call trees and execution paths
- **Decision Trees**: Conditional logic and branching
- **Timeline/Sequence**: Step-by-step interactions between components

### When NOT to Use Diagrams
- Simple linear lists (just use bullets)
- Single relationships (prose is clearer)
- Highly complex graphs (too messy in ASCII)
- When you need exact measurements or scale

## Box Drawing Characters

### Unicode Box Drawing Set
```
â”Œâ”€â”¬â”€â”  â•”â•â•¦â•â•—  â•­â”€â”¬â”€â•®  â”â”â”³â”â”“
â”œâ”€â”¼â”€â”¤  â• â•â•¬â•â•£  â”œâ”€â”¼â”€â”¤  â”¡â”â•‡â”â”©
â””â”€â”´â”€â”˜  â•šâ•â•©â•â•  â•°â”€â”´â”€â•¯  â””â”€â”´â”€â”˜

â”‚ â•‘ â”ƒ  Vertical lines
â”€ â• â”  Horizontal lines
â”¼ â•¬ â•‹  Intersections

Single: â”€ â”‚ â”Œ â” â”” â”˜ â”œ â”¤ â”¬ â”´ â”¼
Double: â• â•‘ â•” â•— â•š â• â•  â•£ â•¦ â•© â•¬
Heavy:  â” â”ƒ â” â”“ â”— â”› â”£ â”« â”³ â”» â•‹
Rounded: â”€ â”‚ â•­ â•® â•° â•¯
```

### Arrows and Connectors
```
â†’ â† â†‘ â†“ â†” â†• â†– â†— â†˜ â†™
â‡’ â‡ â‡‘ â‡“ â‡” â‡•
âŸ¶ âŸµ âŸ·
âœ â” â™ â› â
â–² â–¼ â—€ â–¶ â—† â—
```

### Special Characters
```
â”Š â”† â”‹ â•  Dashed lines
â•Œ â• â”„ â”… â”ˆ â”‰  Dashed horizontal
â”€ â•´ â•¶ â•¸  Line fragments
```

## ASCII Diagram Libraries & Tools

### Graph-viz Style (DOT-like)
Karl can understand DOT-like syntax and render it as ASCII:

```dot
digraph {
  Client -> LB -> Server1
  LB -> Server2
  Server1 -> DB
  Server2 -> DB
}
```

Renders as:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚
    â†“
â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”
â”‚   LB   â”‚
â””â”€â”¬â”€â”€â”€â”€â”¬â”€â”˜
  â”‚    â”‚
  â†“    â†“
â”Œâ”€â”´â”€â”€â” â”Œâ”´â”€â”€â”€â”
â”‚ S1 â”‚ â”‚ S2 â”‚
â””â”€â”¬â”€â”€â”˜ â””â”¬â”€â”€â”€â”˜
  â”‚     â”‚
  â””â”€â”¬â”€â”€â”€â”˜
    â†“
  â”Œâ”€â”€â”´â”€â”
  â”‚ DB â”‚
  â””â”€â”€â”€â”€â”˜
```

### Mermaid-Inspired Syntax
```mermaid
flowchart LR
    A[Start] --> B{Check}
    B -->|Yes| C[Process]
    B -->|No| D[Skip]
    C --> E[End]
    D --> E
```

### PlantUML-Style Sequence
```
@startuml
Client -> API: POST /auth
API -> DB: Validate
DB -> API: OK
API -> Client: Token
@enduml
```

## Flow Charts

### Simple Flow
```
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  Start  â”‚
                 â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Initialize App â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”Œâ”€â”€â”€â”€â”¤  Auth Check?   â”‚
         â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚No           â”‚ Yes
         â†“             â†“
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
    â”‚  Login   â”‚  â”‚  Dashboardâ”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚            â”‚
         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
               â†“
          â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
          â”‚   End   â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Decision Tree
```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ HTTP Request â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚            â”‚            â”‚
         â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”
         â”‚  GET   â”‚   â”‚  POST  â”‚  â”‚ DELETE â”‚
         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
              â”‚            â”‚            â”‚
         â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”
         â”‚ Fetch  â”‚   â”‚ Create â”‚  â”‚ Remove â”‚
         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
              â”‚            â”‚            â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                      â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                      â”‚ Responseâ”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### State Machine
```
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”Œâ”€â”€â”€â†’â”‚   Idle   â”‚â†â”€â”€â”€â”€â”€â”€â”
         â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â”‚
         â”‚         â”‚ start       â”‚
         â”‚         â†“             â”‚
         â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”      â”‚
    done â”‚    â”‚  Running  â”‚      â”‚ cancel
         â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â”‚
         â”‚         â”‚ pause       â”‚
         â”‚         â†“             â”‚
         â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”      â”‚
         â””â”€â”€â”€â”€â”‚  Paused   â”‚â”€â”€â”€â”€â”€â”€â”˜
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Sequence Diagrams

### Basic Sequence
```
  Client          API           Database        Cache
    â”‚              â”‚                â”‚             â”‚
    â”‚â”€â”€â”€ POST â”€â”€â”€â”€â†’â”‚                â”‚             â”‚
    â”‚              â”‚                â”‚             â”‚
    â”‚              â”‚â”€â”€â”€ SELECT â”€â”€â”€â”€â†’â”‚             â”‚
    â”‚              â”‚â†â”€â”€â”€ NULL â”€â”€â”€â”€â”€â”€â”‚             â”‚
    â”‚              â”‚                â”‚             â”‚
    â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€ GET â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚
    â”‚              â”‚â†â”€â”€â”€â”€â”€â”€ MISS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚              â”‚                â”‚             â”‚
    â”‚              â”‚â”€â”€â”€ INSERT â”€â”€â”€â”€â†’â”‚             â”‚
    â”‚              â”‚â†â”€â”€â”€ OK â”€â”€â”€â”€â”€â”€â”€â”€â”‚             â”‚
    â”‚              â”‚                â”‚             â”‚
    â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€ SET â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚
    â”‚              â”‚                â”‚             â”‚
    â”‚â†â”€â”€â”€ 201 â”€â”€â”€â”€â”€â”‚                â”‚             â”‚
    â”‚              â”‚                â”‚             â”‚
```

### Authentication Flow
```
 Browser      Frontend       API Gateway      Auth Service      Database
    â”‚             â”‚               â”‚                 â”‚              â”‚
    â”‚â”€â”€ Login â”€â”€â”€â†’â”‚               â”‚                 â”‚              â”‚
    â”‚             â”‚               â”‚                 â”‚              â”‚
    â”‚             â”‚â”€ POST /auth â”€â†’â”‚                 â”‚              â”‚
    â”‚             â”‚               â”‚                 â”‚              â”‚
    â”‚             â”‚               â”‚â”€ Validate â”€â”€â”€â”€â”€â†’â”‚              â”‚
    â”‚             â”‚               â”‚                 â”‚              â”‚
    â”‚             â”‚               â”‚                 â”‚â”€ Query â”€â”€â”€â”€â”€â†’â”‚
    â”‚             â”‚               â”‚                 â”‚â†â”€â”€ User â”€â”€â”€â”€â”€â”‚
    â”‚             â”‚               â”‚                 â”‚              â”‚
    â”‚             â”‚               â”‚                 â”‚â”€ bcrypt â”€â”   â”‚
    â”‚             â”‚               â”‚                 â”‚          â”‚   â”‚
    â”‚             â”‚               â”‚                 â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚             â”‚               â”‚                 â”‚              â”‚
    â”‚             â”‚               â”‚â† JWT Token â”€â”€â”€â”€â”€â”‚              â”‚
    â”‚             â”‚               â”‚                 â”‚              â”‚
    â”‚             â”‚â†â”€â”€â”€ 200 â”€â”€â”€â”€â”€â”€â”‚                 â”‚              â”‚
    â”‚             â”‚   + token     â”‚                 â”‚              â”‚
    â”‚             â”‚               â”‚                 â”‚              â”‚
    â”‚â†â”€â”€ Cookie â”€â”€â”‚               â”‚                 â”‚              â”‚
    â”‚             â”‚               â”‚                 â”‚              â”‚
```

### Error Handling
```
  Service A     Service B     Circuit Breaker
      â”‚             â”‚                â”‚
      â”‚â”€â”€â”€ Call â”€â”€â”€â†’â”‚                â”‚
      â”‚             Ã—                â”‚  (timeout)
      â”‚             â”‚                â”‚
      â”‚â†â”€ Error â”€â”€â”€â”€â”‚                â”‚
      â”‚             â”‚                â”‚
      â”‚â”€â”€â”€ Call â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚
      â”‚             â”‚                â”‚
      â”‚             â”‚                â”‚  [record failure]
      â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Error â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
      â”‚             â”‚                â”‚
      â”‚â”€â”€â”€ Call â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚
      â”‚             â”‚                â”‚  [threshold reached]
      â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ OPEN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
      â”‚             â”‚                â”‚
      â”‚             â”‚                â”‚  [wait timeout]
      â”‚             â”‚                â”‚
      â”‚â”€â”€â”€ Call â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚
      â”‚             â”‚                â”‚  [half-open: try]
      â”‚             â”‚                â”‚
      â”‚             â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
      â”‚             â”‚                â”‚
      â”‚             â”‚â”€â”€â”€ Success â”€â”€â”€â†’â”‚
      â”‚             â”‚                â”‚  [close circuit]
      â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ OK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
      â”‚             â”‚                â”‚
```

## Architecture Diagrams

### Microservices Architecture
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Frontend                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚   React  â”‚  â”‚   Vue    â”‚  â”‚  Mobile  â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚             â”‚             â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚      API Gateway          â”‚
         â”‚    (Kong/Ambassador)      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚             â”‚             â”‚             â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚  Auth   â”‚   â”‚  Users  â”‚   â”‚ Orders  â”‚  â”‚Payments â”‚
    â”‚ Service â”‚   â”‚ Service â”‚   â”‚ Service â”‚  â”‚ Service â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚             â”‚             â”‚             â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚  Auth   â”‚   â”‚  Users  â”‚   â”‚ Orders  â”‚  â”‚Payments â”‚
    â”‚   DB    â”‚   â”‚   DB    â”‚   â”‚   DB    â”‚  â”‚   DB    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚             â”‚             â”‚             â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚             â”‚
                  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                  â”‚  Redis  â”‚   â”‚ RabbitMQâ”‚
                  â”‚  Cache  â”‚   â”‚  Queue  â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Three-Tier Architecture
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    Presentation Layer                     â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â•‘
â•‘  â”‚  Web Client â”‚  â”‚   Mobile    â”‚  â”‚     API     â”‚       â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                             â”‚
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”´â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                     Business Layer                        â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â•‘
â•‘  â”‚              Application Server                  â”‚     â•‘
â•‘  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚     â•‘
â•‘  â”‚  â”‚Business â”‚  â”‚  Rules  â”‚  â”‚  Logic  â”‚          â”‚     â•‘
â•‘  â”‚  â”‚ Service â”‚  â”‚ Engine  â”‚  â”‚ Handlersâ”‚          â”‚     â•‘
â•‘  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚     â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                             â”‚
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”´â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                      Data Layer                           â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘
â•‘  â”‚   PostgreSQL â”‚  â”‚    Redis     â”‚  â”‚  S3 Storage  â”‚    â•‘
â•‘  â”‚   (Primary)  â”‚  â”‚   (Cache)    â”‚  â”‚   (Files)    â”‚    â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### Event-Driven Architecture
```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Event Producer â”‚
                    â”‚   (API/Service) â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ publish
                             â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚         Event Bus (Kafka/NATS)        â”‚
         â”‚  Topics: [user.*, order.*, payment.*] â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ subscribe
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚              â”‚              â”‚
         â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
         â”‚Consumer â”‚    â”‚Consumer â”‚    â”‚Consumer â”‚
         â”‚   #1    â”‚    â”‚   #2    â”‚    â”‚   #3    â”‚
         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
              â”‚              â”‚              â”‚
         â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
         â”‚Analyticsâ”‚    â”‚  Email  â”‚    â”‚ Webhook â”‚
         â”‚ Service â”‚    â”‚ Service â”‚    â”‚ Service â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Directory Trees

### Project Structure
```
my-app/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”œâ”€â”€ Card.tsx
â”‚   â”‚   â””â”€â”€ Layout/
â”‚   â”‚       â”œâ”€â”€ Header.tsx
â”‚   â”‚       â””â”€â”€ Footer.tsx
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”œâ”€â”€ about.tsx
â”‚   â”‚   â””â”€â”€ api/
â”‚   â”‚       â””â”€â”€ users.ts
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ db.ts
â”‚   â”‚   â””â”€â”€ utils.ts
â”‚   â””â”€â”€ styles/
â”‚       â””â”€â”€ globals.css
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ images/
â”‚   â””â”€â”€ favicon.ico
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ unit/
â”‚   â””â”€â”€ e2e/
â”œâ”€â”€ .env.local
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ README.md
```

### Monorepo Structure
```
workspace/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ @company/ui/
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ tsconfig.json
â”‚   â”œâ”€â”€ @company/api/
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ tsconfig.json
â”‚   â””â”€â”€ @company/shared/
â”‚       â”œâ”€â”€ src/
â”‚       â”œâ”€â”€ package.json
â”‚       â””â”€â”€ tsconfig.json
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ web/
â”‚   â”‚   â””â”€â”€ (Next.js app)
â”‚   â””â”€â”€ mobile/
â”‚       â””â”€â”€ (React Native)
â”œâ”€â”€ tools/
â”‚   â””â”€â”€ scripts/
â”œâ”€â”€ package.json
â”œâ”€â”€ turbo.json
â””â”€â”€ pnpm-workspace.yaml
```

### Dependency Tree
```
app
â”œâ”€â”¬ express@4.18.2
â”‚ â”œâ”€â”¬ body-parser@1.20.1
â”‚ â”‚ â””â”€â”€ raw-body@2.5.1
â”‚ â”œâ”€â”¬ accepts@1.3.8
â”‚ â”‚ â”œâ”€â”€ mime-types@2.1.35
â”‚ â”‚ â””â”€â”€ negotiator@0.6.3
â”‚ â””â”€â”€ cookie@0.5.0
â”œâ”€â”¬ prisma@5.0.0
â”‚ â””â”€â”€ @prisma/client@5.0.0
â””â”€â”¬ react@18.2.0
  â””â”€â”€ loose-envify@1.4.0
```

## Network Diagrams

### Network Topology
```
                        Internet
                           â”‚
                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
                    â”‚   Firewall  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚     Load Balancer       â”‚
              â”‚    (10.0.1.10)          â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                 â”‚                 â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚  Web1   â”‚       â”‚  Web2   â”‚      â”‚  Web3   â”‚
    â”‚10.0.2.1 â”‚       â”‚10.0.2.2 â”‚      â”‚10.0.2.3 â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚                 â”‚                 â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                      â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                      â”‚   DB    â”‚
                      â”‚10.0.3.1 â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Kubernetes Cluster
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Kubernetes Cluster â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Namespace: prod â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Deployment: api â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚  â”‚
â”‚  â”‚  â”‚                                       â”‚           â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”           â”‚           â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ Pod â”‚  â”‚ Pod â”‚  â”‚ Pod â”‚           â”‚           â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”˜           â”‚           â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚  â”‚
â”‚  â”‚        â”‚        â”‚        â”‚                           â”‚  â”‚
â”‚  â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚  â”‚
â”‚  â”‚                 â”‚                                    â”‚  â”‚
â”‚  â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”                             â”‚  â”‚
â”‚  â”‚          â”‚   Service   â”‚                             â”‚  â”‚
â”‚  â”‚          â”‚ (ClusterIP) â”‚                             â”‚  â”‚
â”‚  â”‚          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                             â”‚  â”‚
â”‚  â”‚                 â”‚                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                    â”‚                                       â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚            â”‚    Ingress     â”‚                              â”‚
â”‚            â”‚  (nginx/kong)  â”‚                              â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                  External
```

## Data Structure Diagrams

### Class/Entity Relationship
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       User          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - id: string        â”‚
â”‚ - email: string     â”‚
â”‚ - name: string      â”‚
â”‚ - createdAt: Date   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + login()           â”‚
â”‚ + logout()          â”‚
â”‚ + updateProfile()   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ 1
           â”‚
           â”‚ has many
           â”‚
           â”‚ *
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Post          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - id: string        â”‚
â”‚ - title: string     â”‚
â”‚ - content: string   â”‚
â”‚ - userId: string    â”‚â”€â”€â”€â”€â”€â”€â”€â”
â”‚ - published: bool   â”‚       â”‚ belongs to
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚ + publish()         â”‚       â”‚
â”‚ + delete()          â”‚       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
           â”‚ *                â”‚
           â”‚                  â”‚
           â”‚ has many         â”‚
           â”‚                  â”‚
           â”‚ *                â”‚ 1
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚      Comment        â”‚       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚ - id: string        â”‚       â”‚
â”‚ - text: string      â”‚       â”‚
â”‚ - postId: string    â”‚â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ - userId: string    â”‚â”€â”€â”€â”€â”€â”€â”€â”
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚ belongs to
â”‚ + edit()            â”‚       â”‚
â”‚ + delete()          â”‚       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ 1
                              â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
```

### Database Schema
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Database                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—           â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—             â”‚
â”‚  â•‘    users      â•‘           â•‘    posts      â•‘             â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£           â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£             â”‚
â”‚  â•‘ ğŸ”‘ id         â•‘           â•‘ ğŸ”‘ id         â•‘             â”‚
â”‚  â•‘   email       â•‘â”€â”€â”€â”€â”€â”€â”    â•‘ ğŸ”— user_id    â•‘             â”‚
â”‚  â•‘   password    â•‘      â”‚    â•‘   title       â•‘             â”‚
â”‚  â•‘   created_at  â•‘      â”‚    â•‘   content     â•‘             â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•      â”‚    â•‘   created_at  â•‘             â”‚
â”‚                         â”‚    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•             â”‚
â”‚                         â”‚            â”‚                     â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚
â”‚                                      â”‚                     â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—                   â”‚                     â”‚
â”‚  â•‘   profiles    â•‘                   â”‚                     â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£                   â”‚                     â”‚
â”‚  â•‘ ğŸ”‘ id         â•‘                   â”‚                     â”‚
â”‚  â•‘ ğŸ”— user_id    â•‘                   â”‚                     â”‚
â”‚  â•‘   avatar      â•‘                   â”‚                     â”‚
â”‚  â•‘   bio         â•‘                   â”‚                     â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                   â”‚                     â”‚
â”‚                                      â”‚                     â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—                   â”‚                     â”‚
â”‚  â•‘   comments    â•‘                   â”‚                     â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£                   â”‚                     â”‚
â”‚  â•‘ ğŸ”‘ id         â•‘                   â”‚                     â”‚
â”‚  â•‘ ğŸ”— post_id    â•‘â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚  â•‘ ğŸ”— user_id    â•‘â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â•‘   text        â•‘                           â”‚             â”‚
â”‚  â•‘   created_at  â•‘                           â”‚             â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                           â”‚             â”‚
â”‚                                              â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
       Legend:  ğŸ”‘ Primary Key    ğŸ”— Foreign Key
```

## Integration: `karl diagram` Command

### Command Interface
```bash
# Generate diagram from description
karl diagram "show auth flow"

# Generate from file
karl diagram --input flow.txt --type sequence

# Interactive mode
karl diagram --interactive

# Pipe to file
karl diagram "microservices architecture" > arch.txt

# Combine with other commands
karl explain api.ts | karl diagram --extract-flow

# Different formats
karl diagram "user flow" --style boxes    # Default
karl diagram "user flow" --style minimal  # ASCII only
karl diagram "user flow" --style unicode  # Full unicode
```

### Example Usage

```bash
$ karl diagram "show JWT authentication flow"
```

Output:
```
  Client          API           Auth Service      Database
    â”‚              â”‚                 â”‚              â”‚
    â”‚â”€ POST â”€â”€â”€â”€â”€â”€â†’â”‚                 â”‚              â”‚
    â”‚  /login      â”‚                 â”‚              â”‚
    â”‚              â”‚                 â”‚              â”‚
    â”‚              â”‚â”€ Validate â”€â”€â”€â”€â”€â†’â”‚              â”‚
    â”‚              â”‚                 â”‚              â”‚
    â”‚              â”‚                 â”‚â”€ Query â”€â”€â”€â”€â”€â†’â”‚
    â”‚              â”‚                 â”‚â†â”€ User â”€â”€â”€â”€â”€â”€â”‚
    â”‚              â”‚                 â”‚              â”‚
    â”‚              â”‚                 â”‚â”€ Compare â”€â”  â”‚
    â”‚              â”‚                 â”‚  password â”‚  â”‚
    â”‚              â”‚                 â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚              â”‚                 â”‚              â”‚
    â”‚              â”‚                 â”‚â”€ Generate â”€â” â”‚
    â”‚              â”‚                 â”‚  JWT token â”‚ â”‚
    â”‚              â”‚                 â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚              â”‚                 â”‚              â”‚
    â”‚              â”‚â†â”€ Token â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚
    â”‚              â”‚                 â”‚              â”‚
    â”‚â† 200 â”€â”€â”€â”€â”€â”€â”€â”€â”‚                 â”‚              â”‚
    â”‚  + JWT       â”‚                 â”‚              â”‚
    â”‚              â”‚                 â”‚              â”‚
```

### Skill-Based Diagram Generation

Karl could have diagram-specific skills:

```bash
# Load architecture diagram skill
karl --skill diagrams/architecture explain "our microservices setup"

# Load sequence diagram skill  
karl --skill diagrams/sequence explain "how oauth works"

# Load ERD skill
karl --skill diagrams/database show schema.sql
```

## Piping Diagrams

### To Documentation
```bash
# Add to markdown
karl diagram "api flow" >> docs/architecture.md

# Convert to image (via external tool)
karl diagram "system architecture" | graph-easy --as=boxart

# Send to clipboard (macOS)
karl diagram "database schema" | pbcopy

# Preview in browser
karl diagram "flow" | markdown-preview
```

### From Other Tools
```bash
# From dependency tree
npm ls --all | karl "convert to dependency diagram"

# From git log
git log --graph --oneline | karl "visualize as timeline"

# From netstat
netstat -an | karl "show network connections as diagram"

# From process tree
ps auxf | karl "diagram process hierarchy"
```

### Chain with Other Commands
```bash
# Analyze then diagram
karl analyze app/ --dependencies | karl diagram --type graph

# Explain then visualize
karl explain auth.ts | karl diagram --extract-sequence

# Test flow visualization
karl test --trace | karl diagram --type flow
```

## Beautiful ASCII Diagram Examples

### The Tennis Court (Karl's Signature)
```
                    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                    â•‘     The Karl Court        â•‘
                    â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
                    â•‘                           â•‘
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¬â”€â”€â”€â”€â”€â”€â”€ Net â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  User Input    â•‘           â”‚               â•‘   AI Response  â”‚
   â”‚                â•‘           â”‚               â•‘                â”‚
   â”‚   â•­â”€â”€â”€â”€â”€â•®      â•‘           â”‚               â•‘      â•­â”€â”€â”€â”€â”€â•®   â”‚
   â”‚   â”‚ ğŸ¾  â”‚ â”€â”€â”€â†’ â•‘           â”‚               â•‘  â†â”€â”€ â”‚ ğŸ¾  â”‚   â”‚
   â”‚   â•°â”€â”€â”€â”€â”€â•¯      â•‘    Serve  â”‚  Ace!         â•‘      â•°â”€â”€â”€â”€â”€â•¯   â”‚
   â”‚                â•‘           â”‚               â•‘                â”‚
   â”‚  [Baseline]    â•‘           â”‚               â•‘    [Baseline]  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â•‘                           â•‘
                    â•‘   One-shot completion     â•‘
                    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### Pipeline Flow (Unix Philosophy)
```
                  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                  â•‘   Unix Pipeline Philosophy   â•‘
                  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Input   â”‚â”€â”€â”€â”€â”€â†’â”‚  Filter  â”‚â”€â”€â”€â”€â”€â†’â”‚Transform â”‚â”€â”€â”€â”€â”€â†’â”‚  Output  â”‚
â”‚  Stream  â”‚ data â”‚  (grep)  â”‚ data â”‚  (awk)   â”‚ data â”‚  Stream  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“                 â†“                 â†“                 â†“
  stdin            process          process            stdout
                      â”‚                 â”‚
                      â†“                 â†“
                 [Transform]       [Aggregate]
```

### Layered Architecture (Beautiful Boxes)
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                      ğŸŒ Presentation Layer                      â•‘
â•‘  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“          â•‘
â•‘  â”ƒ  React SPA   â”ƒ  â”ƒ  Mobile App  â”ƒ  â”ƒ   REST API   â”ƒ          â•‘
â•‘  â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›  â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›  â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                    â•‘
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                      âš™ï¸  Business Logic Layer                    â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘  â”‚  Domain Models  â”‚  Services  â”‚  Validators  â”‚  Rules    â”‚   â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                    â•‘
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                      ğŸ’¾ Data Access Layer                       â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â•‘
â•‘  â”‚ Repositories â”‚  â”‚     ORM      â”‚  â”‚    Caching   â”‚          â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                    â•‘
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                      ğŸ—„ï¸  Infrastructure Layer                    â•‘
â•‘  [ PostgreSQL ]  [ Redis ]  [ S3 ]  [ Message Queue ]          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### Git Branch Flow
```
                    Feature Development Flow

master    â—â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â†’
           â•²     â•²             â†‘         â†‘
            â•²     â•²            â”‚         â”‚
             â•²     â•²         merge     merge
              â•²     â•²          â”‚         â”‚
develop        â—â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â—â”€â”€â”€â”€â—â”€â”€â”€â”€â—â”€â”€â”€â”€â—â”€â”€â”€â”€â—â”€â”€â†’
                â•²         â†‘         â•²
                 â•²        â”‚          â•²
               feature   merge      feature
                  â•²       â”‚           â•²
feature/A          â—â”€â”€â—â”€â”€â”€â—            â•²
                                       â•²
feature/B                               â—â”€â”€â—â”€â”€â”€â—
                                              â†‘
                                           merge
                                         (pending)
```

### Circuit Breaker States
```
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         Circuit Breaker States          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”â”â”â”â”â”â”â”â”â”â”â”“
               â”Œâ”€â”€â”€â†’â”ƒ  CLOSED  â”ƒâ†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚    â”—â”â”â”â”â”â”â”â”â”â”â”›           â”‚
               â”‚         â”‚                 â”‚
               â”‚         â”‚ failures        â”‚
         reset â”‚         â”‚ exceed          â”‚ success
      (manual) â”‚         â”‚ threshold       â”‚  count
               â”‚         â†“                 â”‚ exceeds
               â”‚    â”â”â”â”â”â”â”â”â”â”â”â”“           â”‚ threshold
               â”‚    â”ƒ   OPEN   â”ƒ           â”‚
               â”‚    â”—â”â”â”â”â”â”â”â”â”â”â”›           â”‚
               â”‚         â”‚                 â”‚
               â”‚         â”‚ timeout         â”‚
               â”‚         â”‚ expires         â”‚
               â”‚         â†“                 â”‚
               â”‚    â”â”â”â”â”â”â”â”â”â”â”â”“           â”‚
               â””â”€â”€â”€â”€â”ƒ HALF_OPENâ”ƒâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”—â”â”â”â”â”â”â”â”â”â”â”›
                         â”‚
                         â”‚ failures
                         â”‚ occur
                         â†“
                    â”â”â”â”â”â”â”â”â”â”â”â”“
                    â”ƒ   OPEN   â”ƒ
                    â”—â”â”â”â”â”â”â”â”â”â”â”›
```

### Request/Response Lifecycle
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ  HTTP Request Lifecycle                                    â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Request â”‚  GET /api/users/123
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚
     â†“
â•”â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘    Middleware Pipeline      â•‘
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
â•‘  1. âœ“ CORS                  â•‘
â•‘  2. âœ“ Authentication        â•‘
â•‘  3. âœ“ Rate Limiting         â•‘
â•‘  4. âœ“ Body Parsing          â•‘
â•‘  5. âœ“ Validation            â•‘
â•šâ•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     â”‚
     â†“
â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
â”‚ Router   â”‚  Match route â†’ /api/users/:id
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â†“
â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Controller   â”‚  getUserById(id: 123)
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â†“
â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
â”‚  Service  â”‚  userService.findOne(123)
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â†“
â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Repository  â”‚  SELECT * FROM users WHERE id=123
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â†“
â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
â”‚ Database â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ Query
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â†“
â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Transform   â”‚  DTO â†’ JSON
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â†“
â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
â”‚Response â”‚  200 OK { "user": {...} }
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Dependency Graph
```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     App      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚             â”‚             â”‚
         â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
         â”‚  Auth   â”‚   â”‚   API   â”‚   â”‚   UI    â”‚
         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
              â”‚             â”‚             â”‚
         â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
         â”‚  JWT    â”‚   â”‚ Express â”‚   â”‚  React  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                            â”‚             â”‚
                       â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                       â”‚BodyPrsr â”‚   â”‚ ReactDOMâ”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

         Legend:  â”€â”¬â”€  depends on
                   â”‚
                   â†“   imports
```

### Cache Hierarchy
```
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚   Request   â”‚
                      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  L1: Browser    â”‚  ã€ˆ ~10ms ã€‰
                    â”‚  Cache          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ miss
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  L2: CDN        â”‚  ã€ˆ ~50ms ã€‰
                    â”‚  Edge Cache     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ miss
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  L3: Redis      â”‚  ã€ˆ ~5ms  ã€‰
                    â”‚  Cache          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ miss
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  L4: Database   â”‚  ã€ˆ ~20ms ã€‰
                    â”‚  Query          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                      â”‚   Response  â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        â— Hit Rate:  L1: 60%  L2: 30%  L3: 8%  L4: 2%
```

## Practical Tips for Code Explanation

### When to Use Each Diagram Type

| Scenario | Diagram Type | Why |
|----------|-------------|-----|
| "How does auth work?" | Sequence | Shows step-by-step interaction |
| "What's the architecture?" | Architecture | Shows components & relationships |
| "How do these modules relate?" | Dependency Graph | Shows import/require relationships |
| "What are the state transitions?" | State Machine | Shows lifecycle and transitions |
| "How does data flow?" | Flow Chart | Shows data movement and transforms |
| "What's the folder structure?" | Tree | Shows file organization |
| "How do services communicate?" | Network | Shows service topology |
| "What's in the database?" | ERD | Shows table relationships |

### Diagram Best Practices

1. **Keep it Simple**: Max 7-10 boxes per diagram
2. **Use Consistent Symbols**: Pick a style and stick to it
3. **Label Everything**: Arrows, boxes, connections
4. **Show Direction**: Use arrows to indicate flow
5. **Group Related Items**: Use boxes/regions
6. **Add Legend**: If using symbols, explain them
7. **Consider Orientation**: Vertical for hierarchy, horizontal for sequence
8. **Use Whitespace**: Don't cram everything together
9. **Highlight Critical Paths**: Use different line styles
10. **Add Timing/Metrics**: When relevant (response times, etc.)

### ASCII vs Unicode

**ASCII Only** (for maximum compatibility):
```
+--------+      +--------+
| Client |----->| Server |
+--------+      +--------+
    |               |
    v               v
+--------+      +--------+
|  Cache |      |   DB   |
+--------+      +--------+
```

**Unicode** (for beauty):
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client â”‚â”€â”€â”€â”€â”€â†’â”‚ Server â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚               â”‚
    â†“               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cache â”‚      â”‚   DB   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Choose based on**:
- Terminal support
- Copy-paste destination (docs, chat, terminal)
- Personal preference
- Team standards

## Future Enhancements

### Interactive Diagrams
```bash
# Zoom in/out
karl diagram --interactive --zoom

# Click to expand
karl diagram --expandable

# Live updates
karl diagram --watch src/
```

### Diagram Validation
```bash
# Check if diagram matches code
karl diagram --validate architecture.txt

# Generate tests from sequence diagram
karl diagram auth-flow.txt --generate-tests
```

### AI-Enhanced Diagrams
```bash
# Automatically optimize layout
karl diagram --auto-layout

# Suggest improvements
karl diagram arch.txt --suggest

# Convert between types
karl diagram flow.txt --convert-to sequence
```

### Export Formats
```bash
# Export to different formats
karl diagram --export png
karl diagram --export svg
karl diagram --export mermaid
karl diagram --export plantuml
```

---

*"In tennis, you serve to win. In diagrams, you draw to explain. Karl does both."* ğŸ¾
